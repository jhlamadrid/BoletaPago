var oTable_documento_persona,oTable_adjuntos;function isEmpty(o){return void 0===o||(null==o||""==o)}function Alerta(o,r,e){"1"==e&&swal({title:o,text:r,type:"success",confirmButtonClass:"btn-success",confirmButtonText:"Ok",closeOnConfirm:!1,html:!0}),"2"==e&&swal({title:o,text:r,type:"error",confirmButtonClass:"btn-danger",confirmButtonText:"Ok",closeOnConfirm:!1,html:!0}),"3"==e&&swal({title:o,text:r,type:"info",confirmButtonClass:"btn-info",confirmButtonText:"Ok",closeOnConfirm:!1,html:!0}),"4"==e&&swal({title:o,text:r,type:"warning",confirmButtonClass:"btn-warning",confirmButtonText:"Ok",closeOnConfirm:!1,html:!0})}function imprimir(){var o=$("#SUMINISTRO").val().trim(),r=$("#periodo_Mes").val().trim(),e=$("#periodo_Anio").val().trim(),t=$("#telefono").val().trim(),c=$("#correo").val().trim(),s=$("#CAPTCHA").val().trim(),n=$("input:radio[name=radio]:checked").val();$("#mostrando_datos").css("display","none"),$("#rpta_importe_total").text(""),$("#rpta_importe_recibo").text(""),$("#rpta_consumo").text(""),$("#rpta_periodo").text(""),$("#rpta_suministro").text(""),$("#rpta_numRecibo").text(""),$("#rpta_titular").text(""),""==o||""==r||""==e||""==s||""==c?(Alerta("ADVERTENCIA","Existen campos obligatorios por llenar","4"),""==o?$("#SUMINISTRO").css("border-color","red"):$("#SUMINISTRO").css("border-color",""),""==r?$("#periodo_Mes").css("border-color","red"):$("#periodo_Mes").css("border-color",""),""==e?$("#periodo_Anio").css("border-color","red"):$("#periodo_Anio").css("border-color",""),""==c?$("#correo").css("border-color","red"):$("#correo").css("border-color",""),""==s?$("#CAPTCHA").css("border-color","red"):$("#CAPTCHA").css("border-color","")):($("#SUMINISTRO").css("border-color",""),$("#periodo_Mes").css("border-color",""),$("#periodo_Anio").css("border-color",""),$("#correo").css("border-color",""),$("#CAPTCHA").css("border-color",""),11==o.length||7==o.length?($("#SUMINISTRO").css("border-color",""),""==c&&""==t?($("#correo").css("border-color","red"),$("#telefono").css("border-color","red"),Alerta("ADVERTENCIA","Debe de Ingresar correo electronico o celular ","4")):($("#correo").css("border-color",""),$("#telefono").css("border-color",""),9!=t.length&&""!=t?Alerta("ADVERTENCIA","Numero de telefono incorrecto","4"):""!=c&&null==c.match(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{1,5}|[0-9]{1,3})(\]?)$/)?(Alerta("ADVERTENCIA","Correo electronico invalido","4"),$("#correo").css("border-color","red")):($("#correo").css("border-color",""),s==rango?($("#CAPTCHA").css("border-color",""),swal({type:"info",title:"Buscando recibo.....",text:"",showConfirmButton:!1}),$.ajax({type:"POST",url:ruta,data:{sumini:o,periodo:e+r,corr:c,telf:t,tip:n},dataType:"json",success:function(t){t.result?($("#Img_captcha").empty(),rango=t.numero,$("#Img_captcha").append(t.captcha.image),$("#mostrando_datos").css("display","block"),$("#rpta_importe_total").text(" S/ "+t.total+" SOLES"),$("#rpta_importe_recibo").text(" S/ "+t.total_recibo+" SOLES"),$("#rpta_consumo").text(t.consumo),$("#rpta_titular").text(t.busqueda[0].CLINOMBRE+"*****"),$("#rpta_periodo").text(t.busqueda[0].DESMES+" - "+e),$("#rpta_suministro").text(t.busqueda[0].CLICODFAX),$("#rpta_numRecibo").text("S"+t.busqueda[0].FACSERNRO+"-"+t.busqueda[0].FACNRO),"2"==t.tipo?Alerta("EXITO !!!"," Su recibo se envio correctamente a su correo electronico","1"):(swal({type:"info",title:"Descargando recibo.....",text:"",showConfirmButton:!1}),genero_pdf(o,e+r,t.cadena))):($("#Img_captcha").empty(),rango=t.numero,$("#Img_captcha").append(t.captcha.image),Alerta("ADVERTENCIA",t.mensaje,"4"))}})):(Alerta("ADVERTENCIA","Codigo de seguridad  incorrecto","4"),$("#CAPTCHA").css("border-color","red"))))):(Alerta("ADVERTENCIA","El codigo de suministro ingresado es incorrecto ","4"),$("#SUMINISTRO").css("border-color","red")))}function genero_pdf(o,r,e){var t=JSON.stringify(new Array(o,r,e)),c=jQuery("<form>",{action:rut2,method:"post",type:"hidden"}).append(jQuery("<input>",{name:"descarga_recibo",value:t,type:"hidden"}));console.log(c),$("body").append(c),c.submit(),swal.close()}$(document).ready(function(){$("#SUMINISTRO").inputmask("Regex",{regex:"[0-9]{11}"}),$("#telefono").inputmask("Regex",{regex:"[0-9]{9}"}),$("#BUSCAR").on("click",function(){imprimir()})});